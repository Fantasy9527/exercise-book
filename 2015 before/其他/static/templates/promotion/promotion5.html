<div class="row">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <a class="return-up" ui-sref="promotion">
                    <i class="glyphicon glyphicon-arrow-up"></i> 返回上一级
                </a>
                <i class="glyphicon glyphicon-list"></i> 手动群发代金券
            </div>
            <div class="panel-body">
         <form class="form-horizontal form-border" action="" name="promotionForm">
        <div class="panel panel-default">
            <div class="panel-heading ">
                <strong>输入基本信息</strong>
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label class="col-lg-2 control-label">活动名称:</label>
                    <div class="col-lg-10" ng-class="{'has-error':promotionForm.activity.$invalid&&promotionForm.activity.$dirty}">
                        <input class="form-control" type="text" name="activity" placeholder="活动名称" ng-model="activity" required datepicker-dir>
                        <label class="control-label" ng-show="promotionForm.activity.$invalid&&promotionForm.activity.$dirty">必填项</label>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">开始时间:</label>
                    <div class="col-lg-10" ng-class="{'has-error':promotionForm.promotionBeginTime.$invalid&&promotionForm.promotionBeginTime.$dirty}">
                        <div class="input-group" ng-class="{'parsley-error':promotionForm.promotionBeginTime.$invalid&&promotionForm.promotionBeginTime.$dirty}">
                            <input name="promotionBeginTime" ng-model="promotionBeginTime" class="form-control
                             datepicker
                             datepickerTime
                             time-cursor-pointer" type="text" placeholder="开始时间" data-date-picktime="false" data-date-language="zh-cn" data-date-showtoday="true" datepicker-dir readonly required>
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            <label class="control-label" ng-show="promotionForm.promotionBeginTime.$invalid&&promotionForm.promotionBeginTime.$dirty">必填项</label>
                        </div>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">结束时间:</label>
                    <div class="col-lg-10" ng-class="{'has-error':promotionForm.promotionEndTime.$invalid&&promotionForm.promotionEndTime.$dirty}">
                        <div class="input-group">
                            <input type="text" name="promotionEndTime" ng-model="promotionEndTime" class="form-control datepicker datepickerTime time-cursor-pointer" data-date-picktime="false" data-date-language="zh-cn" data-date-showtoday="true" placeholder="结束时间" datepicker-dir readonly>
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                        <label class="control-label" ng-show="promotionForm.promotionEndTime.$invalid&&promotionForm.promotionEndTime.$dirty">必填项</label>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">每周参加时间:</label>
                    <div id="selTimebox" class="col-lg-10" style="position:relative;top:5px">
                        <div class="col-lg-12 special-pb-10">
                            <label class="label-radio inline cursor-pointer">
                                <input type="radio" name="inline-radio" ng-model="weekChecked" value="manDay">
                                <span class="custom-radio"></span> 周一至周五
                            </label>
                        </div>
                        <div class="col-lg-12 special-pb-10">
                            <label class="label-radio inline cursor-pointer">
                                <input type="radio" name="inline-radio" ng-model="weekChecked" value="weekend">
                                <span class="custom-radio"></span> 周六至周日
                            </label>
                        </div>
                        <div class="col-lg-12">
                            <label class="label-radio inline cursor-pointer">
                                <input type="radio" name="inline-radio" value="custom" ng-model="weekChecked">
                                <span class="custom-radio"></span> 自定义
                                <div class='selTime-c' ng-show="weekShow">
                                    <label class="label-checkbox inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周日
                                    </label>
                                    <label class="label-radio inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周一
                                    </label>
                                    <label class="label-radio inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周二
                                    </label>
                                    <label class="label-radio inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周三
                                    </label>
                                    <label class="label-radio inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周四
                                    </label>
                                    <label class="label-radio inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周五
                                    </label>
                                    <label class="label-radio inline">
                                        <input type="checkbox" name="inline-radio">
                                        <span class="custom-checkbox"></span> 周六
                                    </label>
                                    <!--<button class="btn btn-xs btn-info" type="button">确定</button>-->
                                </div>
                            </label>
                        </div>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">参加市别:</label>
                    <div class="col-lg-10">
                        <select class="form-control" ng-options="x.id as x.name for x in servicehours">
                        </select>
                    </div>
                </div>
                <div class="form-group special-no-pb">
                    <label class="col-lg-2 control-label">参加门店:</label>
                    <div class="col-lg-3 special-pb">
                        <select class="form-control" ng-model='ProvinceValue' ng-change="selectProvince()">
                            <option value='0'>选择省</option>
                            <option ng-repeat="x in initProvinceArr" value="{{x.id}}">{{x.name}}</option>
                        </select>
                    </div>
                    <div class="col-lg-3 special-pb">
                        <select class="form-control" ng-model='cityValue' ng-change="selectCity()">
                            <option value='0'>选择城市</option>
                            <option ng-repeat="y in initCityArr" value="{{y.id}}">{{y.name}}</option>
                        </select>
                    </div>
                    <div class="col-lg-3 special-pb">
                        <select class="form-control" ng-model="shopValue">
                            <option value='0'>选择门店</option>
                            <option ng-repeat="z in initShopArr" value="{{z.id}}">{{z.name}}</option>
                        </select>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">参与对象</label>
                    <div class="col-lg-10">
                        <select class="form-control">
                            <option>全体顾客</option>
                        </select>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group PromotionsVegetable">
                    <div class="row">
                        <label class="col-lg-2 control-label">促销菜品</label>
                        <div class="col-lg-3 special-pb">
                            <select class="form-control" ng-model='promotionFood' ng-change="selectPromotionFood()">
                                <option value='default'>菜品大类</option>
                                <option ng-repeat="x in DishesGroups" value="{{x.id}}">{{x.name}}</option>
                            </select>
                        </div>
                        <div class="col-lg-3 special-pb">
                            <select class="form-control" ng-model='promotionFoodSub' ng-change="selectPromotionFoodSub()">
                                <option value='default'>菜品小类</option>
                                <option ng-repeat="y in DishesSubGroups" value="{{y.id}}">{{y.name}}</option>
                            </select>
                        </div>
                        <div class="col-lg-3 special-pb">
                            <select class="form-control" ng-model="concretePromotionFood">
                                <option value='default'>菜品</option>
                                <option ng-repeat="z in concreteDishesGroups" value="{{z.id}}">{{z.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-lg-2 control-label">消费份数</label>
                        <div class="col-lg-10">
                            <input class="form-control " type="text" placeholder="消费份数">
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-lg-2 control-label">加价金额</label>
                        <div class="col-lg-10">
                            <input class="form-control " type="text" placeholder="加价金额">
                        </div>
                    </div>
                    <!-- /.col -->
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">备注</label>
                    <div class="col-lg-10">
                        <textarea class="form-control" rows="3" style="resize:none"></textarea>
                    </div>
                    <!-- /.col -->
                </div>
                <!--<div class="form-group">
                    <div class="col-lg-10 col-lg-offset-2">
                        <label class="label-checkbox">
                            <input type="checkbox">
                            <span class="custom-checkbox"></span> 不与其他促销活动同时进行
                        </label>
                    </div>
                </div>-->
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading ">
                <strong>添加赠送菜品</strong>
            </div>
            <table class="table table-striped" ng-hide="addVegetableShow" id="responsiveTable">
                <thead>
                    <tr>
                        <th>
                            菜品
                        </th>
                        <th>特价</th>
                        <th>
                            操作
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="x in VegetableArr">
                        <td>{{x.name}}</td>
                        <td>
                            <input style="width:80px;" type="text" class="form-control">
                        </td>
                        <td><a class="btn btn-xs btn-danger del-btn" type="button" ng-click="delVegetableTable(x.id)"><i class="fa fa-trash-o"></i>  删除</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div ng-show="addVegetableShow">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-2 col-sm-4">
                            <select class="input-sm form-control inline" style="width:130px;" ng-model="groupsValue" ng-change="groupsChange()">
                                <option value="default">菜品大类</option>
                                <option ng-repeat="x in groups" value="{{x.id}}">{{x.name}}</option>
                            </select>
                        </div>
                        <div class="col-md-2 col-sm-4">
                            <select class="input-sm form-control inline" style="width:130px;" ng-model="subGroupsValue" ng-change="subGroupsChange()">
                                <option value="default">菜品小类</option>
                                <option ng-repeat="x in subgroups" value="{{x.id}}">{{x.name}}</option>
                            </select>
                        </div>
                        <div class="col-md-2 col-sm-4">
                            <a class="btn btn-success" ng-click="addVegetableTable()">添加</a>
                        </div>
                        <div class="padding-md"></div>
                    </div>
                </div>
                <table class="table table-striped table-hover" id="responsiveTable">
                    <thead>
                        <tr>
                            <th>
                                <label class="label-checkbox">
                                    <input type="checkbox" ng-click="selFoodChkAll()" ng-model="chkAllBtn" id="chk-all">
                                    <span class="custom-checkbox"></span>
                                </label>
                            </th>
                            <th>菜品</th>
                            <th>菜品大类</th>
                            <th>菜品小类</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="x in selFoodModels" ng-click="selFoodTable($index)" class="cursor-pointer">
                            <td>
                                <input type="checkbox" ng-model="x.sel" class="chk-row">
                                <span class="custom-checkbox"></span>
                            </td>
                            <td>{{x.name}}</td>
                            <td>{{x.group}}</td>
                            <td>{{x.subGroup}}</td>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="text-center" ng-show="selFoodBtnShow">
                    <ul class="pagination pagination-sm">
                        <li ng-click="selFoodpagePre()"><a href="">«</a>
                        </li>
                        <li ng-class="{active:(selFoodpageIndex==$index)}" ng-repeat="x in selFoodPageMax" ng-click="selFoodpageSkip($index)">
                            <a href="">{{$index+1}}</a>
                        </li>
                        <li ng-click="selFoodpageNex()"><a href="">»</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="panel-footer clearfix f-pr">
                <a class="btn btn-success pull-right" ng-hide="addVegetableShow" ng-click="addVegetableTable()">添加</a>
                <a class="btn btn-danger pull-right" ng-show="addVegetableShow" ng-click="addVegetableTable()">关闭</a>
            </div>
        </div>
        <div class="panel panel-default" id="nonparticipator">
            <div class="panel-heading ">
                <strong>不参加活动时间</strong>
            </div>
            <table class="table table-striped" id="responsiveTable">
                <thead>
                    <tr>
                        <th>
                            开始时间
                        </th>
                        <th>结束时间</th>
                        <th>
                            市别
                        </th>
                        <th>
                            操作
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="x in nonparticipatorTimeData">
                        <td>
                            <input ng-model="nonparticipatorTimeData[$index].begintime" style="width:92px;" type="text" class="form-control datepicker datepickerTime time-cursor-pointer" data-date-picktime="false" data-date-language="zh-cn" data-date-showtoday="true" datepickerDir readonly>
                        </td>
                        <td>
                            <input ng-model="nonparticipatorTimeData[$index].endtime" style="width:92px;" type="text" class="form-control datepicker datepickerTime time-cursor-pointer" data-date-picktime="false" data-date-language="zh-cn" data-date-showtoday="true" datepickerDir readonly>
                        </td>
                        <td>
                            <select style="width:120px;" class="form-control" ng-model="x.serviceHours" ng-options="x.id as x.name for x in servicehours">
                            </select>
                        </td>
                        <td><a class="btn btn-xs btn-danger del-btn" ng-click="delNonparticipator($index)"><i class="fa fa-trash-o"></i>  删除</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="panel-footer clearfix">
                <a id="addTimeTable" class="btn btn-success pull-right" ng-click="nonparticipator()">添加</a>
            </div>
        </div>
        <div class="row">
            <div class="padding-md text-center">
                 <button type="submit" ng-disabled="isPosting||promotionForm.$invalid" class="btn btn-success btn-small" ng-click="submitData()">保存<span ng-show="isPosting">中...</span></button>
            </div>
        </div>
        <div class="padding-md"></div>
        <div class="padding-md"></div>
        <div class="padding-md"></div>
    </form>
           
           
            </div>
        </div>
    </div>
</div>
